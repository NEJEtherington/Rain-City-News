(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},32:function(e,t,a){e.exports=a(64)},37:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),l=a.n(r),o=(a(37),a(2)),s=a(3),i=a(5),m=a(4),u=a(6),p=(a(13),a(12)),h=a(9),d=a(10),f=a(7),y=a.n(f),v=a(11),E=a.n(v),b="https://nick-nc-news.herokuapp.com/api",F=function(e){return E.a.get("".concat(b,"/articles"),{params:e}).then(function(e){return e.data.articles})},g=function(e){return E.a.get("".concat(b,"/articles/").concat(e,"/comments")).then(function(e){return e.data.comments})},C=function(e){return E.a.get("".concat(b,"/users/").concat(e)).then(function(e){return e.data.user})},I=function(e,t){return E.a.patch("".concat(b,"/articles/").concat(e),{inc_votes:t})},S=function(e,t){return E.a.patch("".concat(b,"/comments/").concat(e),{inc_votes:t})},D=function(e,t,a){return E.a.post("".concat(b,"/articles/").concat(e,"/comments"),{username:"".concat(t),body:"".concat(a)})},M=function(e){var t=e.err;return t?c.a.createElement("div",{className:"center"},c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]}]}),c.a.createElement("h2",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},t.errCode),c.a.createElement("h2",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},t.errMessage)):c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]}]}),c.a.createElement("h2",{className:"center",style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},"404"),c.a.createElement("h2",{className:"center",style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},"Oops, not found!"))},O=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={userNameInput:"",err:null},a.handleSubmit=function(e){e.preventDefault(),C(a.state.userNameInput).then(function(e){return a.props.loginUser(e.username)}).catch(function(e){var t=e.response,n={errMessage:t.data.msg,errCode:t.status};a.setState({err:n})})},a.handleInput=function(e){a.setState({userNameInput:e.target.value})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.err;return e?c.a.createElement(M,{err:e}):c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]},{font:"IM Fell DW Pica",weights:[400,"400i"]}]}),c.a.createElement("input",{style:{fontFamily:"IM Fell DW Pica, monospaced"},id:"textInput",onChange:this.handleInput,type:"text",placeholder:"Enter username e.g. weegembump",require:"true",size:"30"}),c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},disabled:!this.state.userNameInput},"Go!"))}}]),t}(c.a.Component),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={loginbox:!1},a.handleClick=function(){a.setState({loginbox:!a.state.loginbox})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("nav",null,c.a.createElement("ul",{className:"navbar"},c.a.createElement(p.a,{to:"/articles"},c.a.createElement(h.a,{className:"icon",icon:d.a,size:"3x"})),c.a.createElement("h3",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},className:"mainheader"},"Rain City News"),c.a.createElement(p.a,{to:"/topics"},c.a.createElement("li",{className:"header"},c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},"Topics"))),this.props.currentUser?c.a.createElement("li",null,c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.props.logoutUser},"Logout: ",this.props.currentUser)):c.a.createElement("li",{className:"header"},c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.handleClick},"Login")),!0===this.state.loginbox&&!this.props.currentUser&&c.a.createElement(O,{loginUser:this.props.loginUser}))))}}]),t}(c.a.Component);function j(){return c.a.createElement("div",{id:"loadingMessage"},c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]}]}),c.a.createElement(h.a,{className:"icon",icon:d.a,size:"lg",spin:!0}),c.a.createElement("h3",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},"loading..."),c.a.createElement(h.a,{className:"icon",icon:d.a,size:"lg",spin:!0}))}var W=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={topics:null},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]}]}),this.state.topics?this.state.topics.map(function(e){return c.a.createElement("div",{key:e.slug,className:"center"},c.a.createElement("ul",{className:"list"},c.a.createElement(p.a,{to:"/topics/".concat(e.slug)},c.a.createElement("li",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},e.description))))}):c.a.createElement(j,null))}},{key:"componentDidMount",value:function(){var e,t=this;E.a.get("".concat(b,"/topics"),{params:e}).then(function(e){return e.data.topics}).then(function(e){t.setState({topics:e})})}}]),t}(c.a.Component),N=a(31),k=a(30),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={votes:0},a.handleVote=function(e,t){"article"===a.props.type?I(e,t):S(e,t),a.setState(function(e){return{votes:e.votes+t}})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"voter"},c.a.createElement("button",{className:"votebutton",onClick:function(){return e.handleVote(e.props.id,1)},disabled:1===this.state.votes},c.a.createElement(h.a,{className:"icon",icon:k.a,size:"2x"})),c.a.createElement("h3",{id:"voter",style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},this.state.votes+this.props.votes),c.a.createElement("button",{className:"votebutton",onClick:function(){e.handleVote(e.props.id,-1)},disabled:-1===this.state.votes},c.a.createElement(h.a,{className:"icon",icon:d.b,size:"2x"})))}}]),t}(n.Component),A=a(16),U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={userAvatar:null},a.componentDidMount=function(){var e=a.props.comment.author;C(e).then(function(e){return a.setState({userAvatar:e.avatar_url})})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,a=e.username,n=e.updateForDeletedComment,r=t.author,l=t.created_at,o=t.body,s=t.votes,i=t.comment_id,m=A(l);return c.a.createElement("li",null,this.state.userAvatar&&c.a.createElement("img",{className:"avatar",alt:"avatar",src:this.state.userAvatar}),c.a.createElement("h5",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},r),c.a.createElement("h5",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},m._d.toString().slice(0,-34)),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"},className:"commentText"},o),a&&c.a.createElement(w,{votes:s,id:i,type:"comment"}),a===r&&c.a.createElement("div",{className:"center"},c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:function(){return function(e){return E.a.delete("".concat(b,"/comments/").concat(e))}(i).then(n)}},"Delete Comment")))}}]),t}(c.a.Component),_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={commentInput:"",newPost:!1},a.handleInput=function(e){a.setState({commentInput:e.target.value,newPost:!1})},a.handleSubmit=function(e){var t=a.props,n=t.id,c=t.username,r=t.updatePostedComments,l=a.state.commentInput;e.preventDefault(),D(n,c,l).then(function(e){return r(e.data.comment)}),a.setState({commentInput:"",newPost:!0})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]},{font:"IM Fell DW Pica",weights:[400,"400i"]}]}),c.a.createElement("form",{onSubmit:this.handleSubmit,className:"center"},c.a.createElement("br",null),c.a.createElement("textarea",{onChange:this.handleInput,type:"text",value:this.state.commentInput,style:{fontFamily:"IM Fell DW Pica, monospaced"},id:"textInput"}),c.a.createElement("br",null),c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},disabled:""===this.state.commentInput},"Post comment")),this.state.newPost&&c.a.createElement("div",{className:"voter"},c.a.createElement(h.a,{id:"voter",icon:d.a,size:"lg"}),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},"Comment posted!"),c.a.createElement(h.a,{id:"voter",icon:d.a,size:"lg"})))}}]),t}(c.a.Component),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={comments:[]},a.updatePostedComments=function(e){a.setState({comments:[e].concat(Object(N.a)(a.state.comments))})},a.updateForDeletedComment=function(){g(a.props.id).then(function(e){a.setState({comments:e})})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,this.props.username&&c.a.createElement(_,{id:this.props.id,username:this.props.username,updatePostedComments:this.updatePostedComments}),this.state.comments.map(function(t){return c.a.createElement("div",{key:t.comment_id,className:"card"},c.a.createElement("ul",{className:"list"},c.a.createElement(U,{comment:t,username:e.props.username,updateForDeletedComment:e.updateForDeletedComment})))}))}},{key:"componentDidMount",value:function(){var e=this;g(this.props.id).then(function(t){e.setState({comments:t})})}}]),t}(c.a.Component),B=a(16),z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={article:null,userAvatar:null,err:null},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.article,a=e.err;return a?c.a.createElement(M,{err:a}):c.a.createElement("div",null,c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]},{font:"IM Fell DW Pica",weights:[400,"400i"]}]}),t?c.a.createElement(c.a.Fragment,null,this.state.userAvatar&&c.a.createElement("img",{className:"avatar",alt:"avatar",src:this.state.userAvatar}),c.a.createElement("h5",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},t.author),c.a.createElement("h5",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},B(t.created_at)._d.toString().slice(0,-34)),c.a.createElement("h2",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},t.title),c.a.createElement("h5",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},"Topic: ",t.topic),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"},className:"text"},t.body),this.props.username&&c.a.createElement(w,{votes:t.votes,id:t.article_id,type:"article"}),c.a.createElement("h3",{className:"center",style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},"Comments"),c.a.createElement(x,{id:this.props.id,username:this.props.username})):c.a.createElement(j,null))}},{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.id,E.a.get("".concat(b,"/articles/").concat(e)).then(function(e){return e.data.article})).then(function(e){t.setState({article:e})}).then(function(){C(t.state.article.author).then(function(e){return t.setState({userAvatar:e.avatar_url})})}).catch(function(e){var a=e.response,n={errMessage:a.data.msg,errCode:a.status};t.setState({err:n})})}}]),t}(c.a.Component),T=a(16),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={userAvatar:null},a.componentDidMount=function(){var e=a.props.article.author;C(e).then(function(e){return a.setState({userAvatar:e.avatar_url})})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.article,t=T(e.created_at);return c.a.createElement("li",null,c.a.createElement(p.a,{to:"/articles/".concat(e.article_id)},c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]},{font:"IM Fell DW Pica",weights:[400,"400i"]}]}),c.a.createElement("h3",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"}},e.title)),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},"Topic: ",e.topic),this.state.userAvatar&&c.a.createElement("img",{className:"avatar",alt:"avatar",src:this.state.userAvatar}),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},e.author),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},t._d.toString().slice(0,-34)),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},"Votes: ",e.votes),c.a.createElement("p",{style:{fontFamily:"IM Fell DW Pica, monospaced"}},"Comments: ",e.comment_count),c.a.createElement("br",null))}}]),t}(c.a.Component),J=function(e){return c.a.createElement("div",null,e.articles.map(function(e){return c.a.createElement("div",{key:e.article_id,className:"card"},c.a.createElement("ul",{className:"center"},c.a.createElement(V,{article:e})))}))},L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={articles:[],sortBy:null,err:null},a.handleClick=function(e){a.setState({sortBy:e.currentTarget.value})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.err;return e?c.a.createElement(M,{err:e}):c.a.createElement("div",null,c.a.createElement(y.a,{fonts:[{font:"IM Fell DW Pica SC",weights:[400,"400i"]}]}),c.a.createElement("div",{className:"sortBy"},c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.handleClick,value:"created_at",className:"sortByItem"},"Sort by Date"),c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.handleClick,value:"author",className:"sortByItem"},"Sort by Author"),c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.handleClick,value:"title",className:"sortByItem"},"Sort by Title"),c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.handleClick,value:"comment_count",className:"sortByItem"},"Sort by Comments"),c.a.createElement("button",{style:{fontFamily:"IM Fell DW Pica SC, monospaced"},onClick:this.handleClick,value:"votes",className:"sortByItem"},"Sort by Votes")),this.state.articles.length?c.a.createElement(J,{articles:this.state.articles}):c.a.createElement(j,null))}},{key:"componentDidMount",value:function(){var e=this,t={topic:this.props.topic};F(t).then(function(t){e.setState({articles:t})}).catch(function(t){var a=t.response,n={errMessage:a.data.msg,errCode:a.status};e.setState({err:n})})}},{key:"componentDidUpdate",value:function(e,t){var a=this,n={sort_by:this.state.sortBy,topic:this.props.topic};(this.state.sortBy!==t.sortBy||this.props.topic!==e.topic)&&F(n).then(function(e){a.setState({articles:e,err:null})}).catch(function(e){var t=e.response,n={errMessage:t.data.msg,errCode:t.status};a.setState({err:n})})}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={currentUser:null},a.loginUser=function(e){a.setState({currentUser:e}),localStorage.setItem("data",JSON.stringify(a.state.currentUser))},a.logoutUser=function(){a.setState({currentUser:""}),localStorage.removeItem("data")},a.componentDidMount=function(){var e=localStorage.getItem("data");if(e){var t=JSON.parse(e);a.setState({currentUser:t})}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(P,{currentUser:this.state.currentUser,logoutUser:this.logoutUser,loginUser:this.loginUser}),c.a.createElement(p.b,null,c.a.createElement(L,{path:"/"}),c.a.createElement(L,{path:"/articles"}),c.a.createElement(L,{path:"/topics/:topic"}),c.a.createElement(z,{path:"/articles/:id",username:this.state.currentUser}),c.a.createElement(x,{path:"/articles/:id/comments"}),c.a.createElement(W,{path:"/topics"}),c.a.createElement(w,{path:"/voter"}),c.a.createElement(M,{default:!0})))}}]),t}(c.a.Component);l.a.render(c.a.createElement(q,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.da149d74.chunk.js.map